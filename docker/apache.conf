<VirtualHost *:80>
	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html

	LogLevel warn

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	<Directory /var/www/html>
		AllowOverride None
		Order Deny,Allow
		Allow from all
		Options -Indexes
	</Directory>

	<Directory /var/www/html>
		php_value memory_limit 128M

		RewriteEngine On
		RewriteBase /engine/

		# Protect application and system files from being viewed
		RewriteRule ^(config/settings|config/users|engine/application|engine/modules|engine/system) - [F,L]

		# Rewrite all other URLs to index.php/URL
		RewriteRule ^notfound$  index.php/$0 [PT,L]
		RewriteRule ^denied$  index.php/$0 [PT,L]
		RewriteRule ^hash/?(.*)$  index.php/$0 [PT,L]
		RewriteRule ^login$  index.php/$0 [PT,L]
		RewriteRule ^logout$ index.php/$0 [PT,L]
		RewriteRule ^directory/(.*)$ index.php/filebrowser/access?path=$1 [QSA,PT,L]

		RewriteCond %{REQUEST_FILENAME} !-f
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteRule .* index.php?path=$0 [QSA,PT,L]
		RewriteRule ^$ index.php?path= [QSA,PT,L]
	</Directory>
</VirtualHost>
